<div id="ai">
  <button id="ai-popup-button" (click)="openSupportPopup()">
    AIHelp
  </button>
  <div id="ai-popup" [style.display]="isOpen ? 'block' : 'none'">
    <div id="ai-popup-header">
      SequoiaAI
      <button id="ai-popup-close-button" (click)="openSupportPopup()">
        Close
      </button>
    </div>
    <div id="ai-popup-body">
      <div class="messages" #scrollMe>
        <div *ngFor="let message of messages" class="message">
          <div [class]="message.type">
            {{ message.message }}
          </div>
        </div>
        <div
          *ngIf="isLoading"
          class="message"
          style="width: 100%; display: block"
        >
          <div [class]="'client'">...</div>
        </div>
      </div>
    </div>
    <form id="ai-popup-footer" [formGroup]="chatForm">
      <input
        formControlName="message"
        type="text"
        id="ai-popup-input"
        placeholder="Ask AI..."
      />
      <button
        id="ai-popup-submit-button"
        [disabled]="!chatForm.valid"
        (click)="sendMessage()"
      >
        Send
      </button>
    </form>
  </div>
</div>
